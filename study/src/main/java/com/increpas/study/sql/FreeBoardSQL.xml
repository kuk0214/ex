<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybaits.org/DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="fSQL">
 	 <!-- 자유게시판 글 리스트 조회 질의명령 -->
 	 <select id="freeBRDList" resultType="bVO" parameterType="page">
 	 	SELECT
			    rno, frbno, title, wid, wdate, wtime, click, sysdate, cnt
			FROM
			    (
			        SELECT
			            ROWNUM rno, frbno, title, wid, wdate, wtime, click, sysdate, cnt
			        FROM
			            (
			                SELECT
			                    f.frbno frbno, title, f.wid wid, f.wdate wdate, f.wdate wtime, click, sysdate, COUNT(re.frbno) cnt
			                FROM
			                    freeboard f, freeboardreply re
			                WHERE
			                    f.frbno = re.frbno(+)
			                    AND f.isShow = 'Y'
			                    AND re.isShow(+) = 'Y'
			                GROUP BY
			                    f.frbno, title, f.wid, f.wdate, click, sysdate
			                ORDER BY
			                    f.wdate DESC
			            )
			    )
			WHERE
			    rno BETWEEN #{startCont} AND #{endCont}
 	 </select>
 	 
 	<!-- 총게시글수 조회 질의명령 -->
	<select id="getTotal" resultType="int">
		SELECT
			COUNT(*)
		FROM
			freeboard
		WHERE
			isShow = 'Y'
	</select>
</mapper>